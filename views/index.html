<!DOCTYPE html>
<html data-role="customer">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="https://unpkg.com/vue@next"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        button {
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        .hidden {
            display: none;
        }
    </style>
    <title>Simple Shopping</title>
</head>
<body>
    <div class="container my-4">
        <button id="customer" class="btn btn-primary">顧客</button>
        <button id="seller" class="btn btn-secondary">賣家</button>

        <div id="app" class="mt-4">
            <h2>目前身份：<span id="role"></span></h2>
            <div id="customer-ui">
                <h3>商品列表</h3>
                <button @click="loadCustomerData" class="btn btn-info">更新</button>
                <table class="table">
                    <thead>
                        <tr>
                            <th>名稱</th>
                            <th>價格</th>
                            <th>描述</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="product in products">
                            <td>{{ product.name }}</td>
                            <td>{{ product.price }}</td>
                            <td>{{ product.description }}</td>
                            <td>
                                <button @click="addToCart(product.id)" class="btn btn-success">加入購物車</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <h3>購物車</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>名稱</th>
                            <th>價格</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="item in cartItems">
                            <td>{{ item.name }}</td>
                            <td>{{ item.price }}</td>
                            <td>
                                <button @click="removeFromCart(item.id)" class="btn btn-danger">移除</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div id="seller-ui" class="hidden">
                <h3>商品列表</h3>
                <button @click="loadSellerData" class="btn btn-info">更新</button>
                <table class="table">
                    <thead>
                        <tr>
                            <th>名稱</th>
                            <th>價格</th>
                            <th>描述</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="product in sellerProducts">
                            <td>{{ product.name }}</td>
                            <td>{{ product.price }}</td>
                            <td>{{ product.description }}</td>
                            <td>
                                <button @click="editProduct(product.id)" class="btn btn-warning">編輯</button>
                                <button @click="deleteProduct(product.id)" class="btn btn-danger">刪除</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <h3>新增商品</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>名稱</th>
                            <th>價格</th>
                            <th>描述</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" id="name" class="form-control"></td>
                            <td>
                                <input type="number" id="price" step="1" min="0" class="form-control">
                            </td>
                            <td><input type="text" id="description" class="form-control"></td>
                            <td>
                                <button @click="addProduct" class="btn btn-primary">新增</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('customer').addEventListener('click', () => {
            document.querySelector('html').setAttribute('data-role', 'customer');
            document.getElementById('role').innerText = '顧客';
            document.getElementById('customer-ui').style.display = 'block';
            document.getElementById('seller-ui').style.display = 'none';
        });

        document.getElementById('seller').addEventListener('click', () => {
            document.querySelector('html').setAttribute('data-role', 'seller');
            document.getElementById('role').innerText = '賣家';
            document.getElementById('seller-ui').style.display = 'block';
            document.getElementById('customer-ui').style.display = 'none';
        });

        const shoppingCart = Vue.createApp({
            data() {
                return {
                    products: [],
                    cartItems: [],
                    sellerProducts: [],
                };
            },
            methods: {
                loadCustomerData() {
                    // 實作載入商品列表的邏輯
                    // 需API
                    this.products = [
                        { id: 1, name: '商品A', price: 100, description: '描述A' },
                        { id: 2, name: '商品B', price: 200, description: '描述B' },
                        // 更多商品...
                    ];
                },
                addToCart(productId) {
                    // 實作將商品加入購物車的邏輯
                    const product = this.products.find(p => p.id === productId);
                    if (product) {
                        this.cartItems.push(product);
                    }
                },
                removeFromCart(itemId) {
                    // 實作將商品從購物車移除的邏輯
                    this.cartItems = this.cartItems.filter(item => item.id !== itemId);
                },
                loadSellerData() {
                    // 實作加載賣家商品列表的邏輯
                    // 需API
                    this.sellerProducts = [
                        { id: 1, name: '商品A', price: 100, description: '描述A' },
                        { id: 2, name: '商品B', price: 200, description: '描述B' },
                        // 更多商品...
                    ];
                },
                addProduct() {
                    // 實作添加新商品的邏輯
                    // 需API
                    const newProduct = {
                        id: new Date().getTime(),  // 仅作为示例，实际应由后端生成ID
                        name: document.getElementById('name').value,
                        price: document.getElementById('price').value,
                        description: document.getElementById('description').value
                    };
                    this.sellerProducts.push(newProduct);
                },
                editProduct(productId) {
                    // 實作編輯商品的邏輯
                    // 
                },
                deleteProduct(productId) {
                    // 實作删除商品的邏輯
                    this.sellerProducts = this.sellerProducts.filter(p => p.id !== productId);
                },
            },
            mounted() {
                this.loadCustomerData();
            },
        });
        shoppingCart.mount('#app');
    </script>
</body>
</html>
